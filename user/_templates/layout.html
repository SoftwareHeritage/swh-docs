{% extends "!layout.html" %}

{# copied from sphinx_rtd_theme/layout.html, with the logo link pointing to General (landing page) #}
{%- block sidebartitle %}
{%- if logo and theme_logo_only %}
  <a href="/general/">
{%- else %}
  <a href="/general/" class="icon icon-home"> Software Heritage - Documentation
{%- endif %}

{%- if logo %}
  {#- Not strictly valid HTML, but it's the only way to display/scale
      it properly, without weird scripting or heaps of work
  #}
  {%- if sphinx_version_info < (4, 0) -%}
  <img src="{{ pathto('_static/' + logo, 1) }}" class="logo" alt="{{ _('Logo') }}"/>
  {%- else %}
  <img src="{{ logo_url }}" class="logo" alt="{{ _('Logo') }}"/>
  {%- endif %}
{%- endif %}
</a>

{%- if theme_display_version %}
  {%- set nav_version = version %}
  {%- if READTHEDOCS and current_version %}
    {%- set nav_version = current_version %}
  {%- endif %}
  {%- if nav_version %}
    <div class="version">
      {{ nav_version }}
    </div>
  {%- endif %}
{%- endif %}

{%- include "searchbox.html" %}

{%- endblock %}


{# copied from sphinx_rtd_theme/layout.html, with the extra "Development Documentation" and "System Administration" links #}
{%- block menu %}
  {%- set toctree = toctree(maxdepth=theme_navigation_depth|int,
                            collapse=theme_collapse_navigation|tobool,
                            includehidden=theme_includehidden|tobool,
                            titles_only=theme_titles_only|tobool) %}
  {%- if toctree %}
    {{ toctree }}
  {%- else %}
    <!-- Local TOC -->
    <div class="local-toc">{{ toc }}</div>
  {%- endif %}

  <hr />

  <ul>
        <li class="toctree-l1"><a href="/devel/">Development Documentation</a></li>
        <li class="toctree-l1"><a href="/sysadm/">System Administration</a></li>
  </ul>
{%- endblock %}